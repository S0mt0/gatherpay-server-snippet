I'm building a nestjs app called gatherpay. Using postgres for databse and sequelize (using class based method for modeling) for orm. I need three main models, users, account_detail, groups, chats, and session.

A. I need you to create me the user model with the following properties:

1. firstName required 2. lastName required 3. phoneNumber required when auth_method is credentials and unique 4. auth_method (enum of `credentials`, `google`) defaulted to `credentials` 5. email only required when `auth_method` is `google` and unique 6. username (generated by default using their first or last name) unique 7. password required when auth_method is credentials 8. verified_phone boolean default false 9. verified_kyc boolean default false 10. `bio` max char 200 not required. avatarUrl string not required but has a default value 11. `default_account` points to `account_detail` model. 12. country

B. For the `account_detail` model:

1. bank name required 2. account number required 4. account name required 5. bank sort code not required

Relationship between user and account detail is that a user can have multiple accounts ie multiple accounts can belong to a user but multiple users cannot have the same account.

C. for the `session` model:
A user can only have one session and vice verse. session should have the following props:

1. deviceLastLoggedIn (more like the current active device or loggedindevice gotten throuh user-agent) 2. lastLoggedIn Date 3. passwordLastChanged Date 4. refresh_token 5. devices_logged_in array of user agents 6. currentIPAddress etc 7. twoFactorEnabled boolean

D. For the `groups` model.
The relationship between the group and a user is like that of a social media messaging app like whatsapp where a user can belong to many different whatsapp groups created by self or others and chat in them, and a user can also create multiple groups that can have many members. when a user creates a group, they become the admin of that group (factor these into the user model as well). So basically each group can have many members and each users can belong to many groups and also create groups. (each user should have a property showing all the groups they belong to, and also all the groups of which they are the admin ie they created). Each group should also have a property showing who the admin is. Almost all similarities with whatsapp chat groups.
Here are some core props of each group:

1. group name required 2. admin required 3. max_number (maximum number of members allowed to join) required 4. description required 5. bannerUrl 6. contribution goal/target (amount of money each member is expected to pay in an agreed upon interval), 7 accountToPayContribution etc.
   As soon as each group is created, a group live chat is automatically created as well with all members involved. I want to be able to persist the chat history to database, so that each time the app loads all the old chats or chat history is restored with the messages and names/username of the each sender.

Here's how the app works. It is like a thrift-saving app where people can create or join groups with preset rules, like contribution amount, duration, interval, max member, who's getting paid next, and when etc.

I might not have all the needed properties yet. But you're a genius coder and intellectual. I need you to create these models, including a suitable `chats` model, with their suitable properties and implementation.
